CREATE TABLE IF NOT EXISTS system_config (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nada_consta_email VARCHAR(255) NOT NULL,
    is_active BOOLEAN NOT NULL DEFAULT FALSE
    );

-- Garante que só pode haver uma configuração ativa
CREATE UNIQUE INDEX IF NOT EXISTS unique_active_config ON system_config (is_active) WHERE is_active = TRUE;

-- Insere uma linha padrão ativa, se necessário
INSERT INTO system_config (id, nada_consta_email, is_active)
SELECT 1, 'default@utfpr.edu.br', TRUE
    WHERE NOT EXISTS (SELECT 1 FROM system_config WHERE is_active = TRUE);
